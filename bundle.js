(()=>{"use strict";var t=function(){function t(t,i){var e;void 0===t&&(t=320),void 0===i&&(i=600),this.canvas=document.createElement("canvas");var n=document.getElementById("root");n&&n.appendChild(this.canvas),e=[t,i],this.canvas.width=e[0],this.canvas.height=e[1],this.scenes=[],this.current=null,this.keyMap={}}return t.prototype.resize=function(t,i){var e;void 0===t&&(t=320),void 0===i&&(i=600),e=[t,i],this.canvas.width=e[0],this.canvas.height=e[1]},t.prototype.start=function(){var t,i,e,n=this;this.current=this.current||this.scenes[0]||null,this.mainloop(),t=window,i=function(t){for(var i in t.preventDefault(),n.keyMap)if(n.keyMap&&Object.prototype.hasOwnProperty.call(n.keyMap,i))switch(t.type){case"keydown":-1!==n.keyMap[i].code.indexOf(t.code)&&(n.keyMap[i].push=!0);break;case"keyup":-1!==n.keyMap[i].code.indexOf(t.code)&&(n.keyMap[i].push=!1);break;default:return}},e=t,"keydown keyup".split(" ").forEach((function(t){return e.addEventListener(t,i,!1)}))},t.prototype.mainloop=function(){var t=this.canvas.getContext("2d");t.fillStyle="#000",t.fillRect(0,0,this.canvas.width,this.canvas.height),this.current.update();for(var i=0;i<this.current.objs.length;i++)this.current.objs[i].update(this.canvas);requestAnimationFrame(this.mainloop.bind(this))},t.prototype.add=function(t){this.scenes=this.scenes.concat([t])},t.prototype.setKeyBind=function(t,i){this.keyMap[t]={code:i,push:!1}},t}();const i=t,e=function(){function t(t,i){var e;void 0===i&&(i=48),this.size=i,this.img=new Image,this.img.src=t,e=[0,0],this.x=e[0],this.y=e[1],this.data=[]}return t.prototype.update=function(t){this.render(t)},t.prototype.render=function(t){for(var i=0;i<this.data.length;i++){var e=this.y+this.size*i;if(!(e<-1*this.size||e>t.height))for(var n=0;n<this.data[i].length;n++){var s=this.x+this.size*n;if(!(s<-1*this.size||s>t.width)){var o=this.data[i][n]%(this.img.width/this.size),r=Math.floor(this.data[i][n]/(this.img.width/this.size));t.getContext("2d").drawImage(this.img,this.size*o,this.size*r,this.size,this.size,s,e,this.size,this.size)}}}},t.prototype.eventHandler=function(){},t}();var n,s=function(){function t(t,i,e,n,s,o){void 0===i&&(i=48),void 0===e&&(e=48),void 0===n&&(n=0),void 0===s&&(s=0),void 0===o&&(o=0),this.width=i,this.height=e,this.index=n,this.x=s,this.y=o,this.img=new Image,this.img.src=t}return t.prototype.update=function(t){this.render(t),this.eventHandler()},t.prototype.render=function(t){if(!(this.x<-1*this.width||this.x>t.width||this.y<-1*this.height||this.y>t.height)){var i=t.getContext("2d"),e=this.index%(this.img.width/this.width),n=Math.floor(this.index/(this.img.width/this.width));i.drawImage(this.img,this.width*e,this.height*n,this.width,this.height,this.x,this.y,this.width,this.height)}},t.prototype.eventHandler=function(){},t}(),o=(n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])},n(t,i)},function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function e(){this.constructor=t}n(t,i),t.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)});const r=function(t){function i(i,e){void 0===e&&(e=48);var n=t.call(this,i,e,e)||this;return n.size=e,n}return o(i,t),i}(s),h=function(){function t(){this.objs=[]}return t.prototype.add=function(t){this.objs=this.objs.concat([t])},t.prototype.update=function(){this.eventHandler()},t.prototype.eventHandler=function(){},t}();var a={up:["KeyW","Numpad8","ArrowUp"],down:["KeyS","Numpad2","ArrowDown"],right:["KeyD","Numpad6","ArrowRight"],left:["KeyA","Numpad4","ArrowLeft"],confirm:["Enter","KeyZ"],discard:["Escape","KeyX"]},d=[[11,11,11,11,11,11,11,11,11,11],[11,10,10,10,10,10,10,10,10,11],[11,4,4,4,4,4,4,4,4,11],[11,4,11,4,4,11,11,11,4,11],[11,4,11,11,11,11,10,10,4,11],[11,4,11,10,10,11,4,4,4,11],[11,4,11,4,4,11,11,11,4,11],[11,4,9,4,4,9,10,11,4,11],[11,4,4,4,4,4,4,11,4,11],[11,11,11,11,11,11,11,11,11,11]];window.addEventListener("load",(function(){var t=new i(.95*window.innerWidth,.95*window.innerHeight);for(var n in a)a&&Object.prototype.hasOwnProperty.call(a,n)&&t.setKeyBind(n,a[n]);window.addEventListener("resize",(function(){t.resize(.95*window.innerWidth,.95*window.innerHeight)}));var s=new h,o=new e("./img/school_A5.png");o.data=d,s.add(o);var c=new r("./img/kanzaki1.png");s.add(c),s.eventHandler=function(){t.keyMap.up.push&&(c.y-=4),t.keyMap.down.push&&(c.y+=4),t.keyMap.right.push&&(c.x+=4),t.keyMap.left.push&&(c.x-=4)},t.add(s),t.start()}))})();
//# sourceMappingURL=bundle.js.map