{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://app/./src/modules/Game.ts","webpack://app/./src/modules/Sprite.ts","webpack://app/./src/App.ts"],"sourcesContent":["import Sprite from './Sprite';\n\ninterface keyEvent {\n  keyCode: number[];\n  push: boolean;\n}\n\ninterface key {\n  [index: string]: keyEvent;\n}\n\nclass Game {\n  public canvas: HTMLCanvasElement;\n\n  public objs: Sprite[];\n\n  public keyMap: key;\n\n  constructor(width = 320, height = 600) {\n    this.canvas = document.createElement('canvas');\n    const root = document.getElementById('root');\n    if (root) root.appendChild(this.canvas);\n    [this.canvas.width, this.canvas.height] = [width, height];\n\n    this.objs = [];\n\n    this.keyMap = {};\n  }\n\n  resize(width = 320, height = 600) {\n    [this.canvas.width, this.canvas.height] = [width, height];\n  }\n\n  start() {\n    this.mainloop();\n\n    // const eventListener = (e) => {\n    //   e.preventDefault();\n    //   for (const i in this.keyMap) {\n    //     if (this.keyMap && Object.prototype.hasOwnProperty.call(this.keyMap, i))\n    //       switch (e.type) {\n    //         // case 'keydown':\n    //         default:\n    //           return;\n    //       }\n    //   }\n    // };\n  }\n\n  mainloop() {\n    const ctx = this.canvas.getContext('2d') as CanvasRenderingContext2D;\n    ctx.fillStyle = '#000';\n    ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);\n\n    for (let i = 0; i < this.objs.length; i++) {\n      this.objs[i].update(this.canvas);\n    }\n\n    requestAnimationFrame(this.mainloop.bind(this));\n  }\n\n  add(obj: Sprite) {\n    this.objs = this.objs.concat([obj]);\n  }\n\n  setKeyBind(name: string, code: number[]) {\n    this.keyMap[name] = {\n      keyCode: code,\n      push: false,\n    };\n  }\n}\n\nexport default Game;\n","class Sprite {\n  img: HTMLImageElement;\n\n  constructor(\n    img: string,\n    public x: number = 0,\n    public y: number = 0,\n    public width: number = 40,\n    public height: number = 40,\n    public index: number = 0,\n  ) {\n    this.img = new Image();\n    this.img.src = img;\n  }\n\n  update(canvas: HTMLCanvasElement) {\n    this.render(canvas);\n  }\n\n  render(canvas: HTMLCanvasElement) {\n    if (\n      this.x < -1 * this.width ||\n      this.x > canvas.width ||\n      this.y < -1 * this.height ||\n      this.y > canvas.height\n    ) {\n      return;\n    }\n    const ctx = canvas.getContext('2d') as CanvasRenderingContext2D;\n\n    const xIndex = this.index % (this.img.width / this.width);\n    const yIndex = Math.floor(this.index / (this.img.width / this.width));\n    ctx.drawImage(\n      this.img,\n      this.width * xIndex,\n      this.height * yIndex,\n      this.width,\n      this.height,\n      this.x,\n      this.y,\n      this.width,\n      this.height,\n    );\n  }\n}\n\nexport default Sprite;\n","import Game from './modules/Game';\nimport Sprite from './modules/Sprite';\nimport './css/Style.scss';\n\nconst keys = {\n  up: [87, 104, 38], // w,テンキー8,↑\n  down: [83, 98, 40], // s,テンキー2,↓\n  right: [68, 102, 39], // d,テンキー6,→\n  left: [65, 100, 37], // a,テンキー4,←\n  confirm: [13, 90], // Enter,z\n  discard: [27, 88], // Esc,x\n};\n\nwindow.addEventListener('load', () => {\n  const game = new Game(window.innerWidth * 0.95, window.innerHeight * 0.95);\n  for (const i in keys) {\n    if (keys && Object.prototype.hasOwnProperty.call(keys, i)) {\n      game.setKeyBind(i, keys[i]);\n    }\n  }\n\n  window.addEventListener('resize', () => {\n    game.resize(window.innerWidth * 0.95, window.innerHeight * 0.95);\n  });\n\n  const school = new Sprite('./img/school_A5.png');\n  game.add(school);\n\n  game.start();\n});\n"],"names":["width","height","this","canvas","document","createElement","root","getElementById","appendChild","objs","keyMap","resize","start","mainloop","ctx","getContext","fillStyle","fillRect","i","length","update","requestAnimationFrame","bind","add","obj","concat","setKeyBind","name","code","keyCode","push","img","x","y","index","Image","src","render","xIndex","yIndex","Math","floor","drawImage","keys","up","down","right","left","confirm","discard","window","addEventListener","game","innerWidth","innerHeight","Object","prototype","hasOwnProperty","call","school"],"sourceRoot":""}